<%- include('fragments/head.ejs') %>
<body>
<%- include('fragments/nav.ejs') %>

<main>
  <h1>Gerer comptes</h1>

  <% if (error) { %>
    <p class="muted"><%= error %></p>
  <% } %>

  <table class="log-table">
    <thead>
      <tr>
        <th>Identifiant</th>
        <th>Role</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach((user) => { %>
        <tr>
          <td><%= user.login %></td>
          <td><%= user.profil %></td>
          <td>
            <% if (user.login === 'adminweb' || user.login === 'sysadmin') { %>
              <span>Protege</span>
            <% } else { %>
              <form class="inline-form" action="/admin/manage-accounts/delete" method="post" style="display:inline;">
                <input type="hidden" name="userId" value="<%= user._id %>">
                <button class="delete-account-btn" type="submit">Supprimer</button>
              </form>
            <% } %>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</main>

<%- include('fragments/footer.ejs') %>
</body>
</html>
